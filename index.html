<!--
Devil Town Main Homepage (index.html)
ì—­í• : ì‚¬ì´íŠ¸ì˜ ì „ë°˜ì ì¸ êµ¬ì¡°ì™€ ë””ìì¸(ë©”ì¸ í…Œë§ˆ, ë©”ë‰´, ì„¹ì…˜)ì„ ë‹´ë‹¹
í˜¸ì¶œ ê´€ê³„: main.py(Server) -> index.html (Client) -> ë¶„ë¦¬ëœ js/*.js + css
ìˆ˜ì • ì‹œ ì£¼ì˜ì‚¬í•­: .agent/rules/ì— ì •ì˜ëœ ì½”ë”© í‘œì¤€ ë° ë¬¸ì„œ ìŠ¤íƒ€ì¼ ì¤€ìˆ˜ í•„ìš”
-->
<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DEVILTOWN</title>
  <link rel="stylesheet" href="css/style.css?v=3.6">
</head>

<body>

  <canvas id="noise"></canvas>

  <!-- Entrance Gate (Devil 666 - User's Original Design) -->
  <div id="gateOverlay">
    <div class="gate-container">
      <h1 class="gate-title">
        Bad gateway
        <span class="error-badge">Error
          code 666</span>
      </h1>

      <div class="status-row">
        <div class="status-box">
          <div class="status-icon">ğŸ–¥ï¸</div>
          <div class="status-label">Browser</div>
          <div class="status-state working">Working</div>
        </div>

        <div class="status-box">
          <div class="status-icon">â˜ï¸</div>
          <div class="status-label">Hellfire Gateway</div>
          <div class="status-state working">Working</div>
        </div>

        <div class="status-box">
          <div class="status-icon">ğŸ–¥ï¸</div>
          <div class="status-label">Host</div>
          <div class="status-state error">Summoning...</div>
        </div>
      </div>

      <div class="info-section">
        <h2>What happened?</h2>
        <p>The underworld server is testing your identity.</p>
      </div>

      <div class="info-section">
        <h2>What can I do?</h2>
        <p>If you are a devil, confirm below.</p>
      </div>

      <div class="devil-checkpoint">
        <label class="devil-label">
          <input type="checkbox" id="devilCheck" class="devil-checkbox">
          If you are a devil, check this box and press Enter.
        </label>
        <br>
        <button id="enterBtn" class="devil-btn">Enter</button>
      </div>

      <div class="gate-footer">
        Hellfire Ray ID: <span id="rayId">666-DEVIL-001</span><br>
        Your Soul ID: ********
      </div>
    </div>
  </div>

  <!-- Intro stage -->
  <div class="stage">
    <div id="art">
      <pre id="ascii"><span id="skullSpan"></span><span id="logoSpan"></span></pre>
    </div>
  </div>

  <!-- Game Result Area (Moved out to be on top) -->
  <div id="gameResult" style="
    position: fixed; 
    top: 50px; 
    left: 50%; 
    transform: translateX(-50%); 
    text-align: center; 
    pointer-events: none; 
    display: none; 
    z-index: 1000;
    font-family: inherit;
    width: 90%;
    background: rgba(0,0,0,0.4);
    backdrop-filter: blur(5px);
    padding: 20px;
    border-radius: 20px;
    border: 1px solid rgba(255,0,0,0.2);
  "></div>

  <!-- Top-right menu -->
  <button id="menuBtn" class="menu-btn" aria-label="Open menu" aria-expanded="false">MENU</button>
  <div id="menuOverlay" class="menu-overlay" hidden></div>

  <aside id="menuPanel" class="menu-panel" role="dialog" aria-modal="true" aria-label="Site menu" aria-hidden="true">
    <div class="menu-header">
      <div class="menu-title">DEVILTOWN</div>
      <button id="menuClose" class="menu-close" aria-label="Close menu">âœ•</button>
    </div>

    <nav class="menu-items">
      <button class="menu-item" data-key="wtfis">whatthefuckisdeviltown</button>
      <button class="menu-item" data-key="schedule">Schedule</button>
      <button class="menu-item" data-key="archive">Archive (Photo/Video)</button>
      <button class="menu-item" data-key="mixes">Mixes</button>
      <button class="menu-item" data-key="marathoner">Marathoner</button>
      <button class="menu-item" data-key="skullgame">ğŸ² Skull DIce</button>
      <button class="menu-item" data-key="devilcoach">Devil Coach (AI)</button>
    </nav>

    <div class="menu-help">
      click item â†’ open page<br />
      ESC â†’ close<br />
      SPACE / tap â†’ replay intro
    </div>
  </aside>

  <!-- Page overlay -->
  <div id="pageOverlay" hidden></div>

  <!-- Video modal -->
  <div id="videoModal" aria-hidden="true">
    <div id="videoModalBg" class="video-modal-bg"></div>
    <div class="video-modal-panel" role="dialog" aria-modal="true" aria-label="Video player">
      <div class="video-modal-head">
        <div id="videoModalTitle" class="video-modal-title">Playlist</div>
        <button id="videoModalClose" class="video-modal-close" aria-label="Close video">âœ•</button>
      </div>
      <div class="video-modal-body" style="position:relative;">
        <!-- Navigation Buttons -->
        <button id="btnPrevVideo" class="nav-btn prev" aria-label="Previous video">â®</button>
        <button id="btnNextVideo" class="nav-btn next" aria-label="Next video">â¯</button>

        <iframe id="videoModalFrame" class="video-frame" src="" title="YouTube video" frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
        <div id="videoCounter"
          style="text-align:center; margin-top:10px; font-size:12px; opacity:0.7; font-weight:bold;"></div>

        <!-- Playlist (TOC) -->
        <div id="videoPlaylist" class="video-playlist"></div>
      </div>
    </div>
  </div>

  <!-- Page container (overlay panel) -->
  <section id="content" role="dialog" aria-modal="true" aria-labelledby="contentTitle" aria-hidden="true">
    <div class="content-header">
      <div id="contentTitle" class="content-title">DEVILTOWN</div>
      <button id="pageClose" class="content-close" aria-label="Close page">âœ•</button>
    </div>

    <div class="content-body">
      <div id="sec-wtfis" class="section feed-section" data-feed-key="wtfis">
        <p class="feed-intro">ë¡œê³  / í‹°ì…”ì¸  / í¬ìŠ¤í„° / ê·¸ë˜í”½ ì‹¤í—˜ í”¼ë“œ</p>
        <div id="wtfisTagBar" class="feed-tag-bar" hidden></div>
        <div id="wtfisFeed" class="feed-list" aria-live="polite"></div>
        <div id="wtfisEmpty" class="feed-empty" hidden>í‘œì‹œí•  ê·¸ë˜í”½ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</div>
      </div>

      <!-- SKULL Dice Section -->
      <div id="sec-skullgame" class="section">
        <div class="game-box">
          <!-- Button is now the main focus; results pop up at the very top of the screen -->
          <button id="skullGameBtn" class="btn skull-game-btn">
            ROLL THE SKULL DICE ğŸ²
          </button>

          <!-- Result appears here below the button -->
          <div id="miniGameResult" class="mini-game-result"></div>

          <div class="skull-chance">
            (CHANCE: 0km : 1% | 30km : 5% | Full : 1%)
          </div>
        </div>
      </div>

      <!-- Devil Coach Section -->
      <div id="sec-devilcoach" class="section">
        <p style="text-align:center; opacity:0.7; font-size:13px; margin-bottom:20px;">ìš•ìŸì´ AI ì½”ì¹˜ì™€ ëŒ€í™”í•˜ì„¸ìš”. ì°°ì§„ íŒ©íŠ¸ í­ê²©ìœ¼ë¡œ ì •ì‹ 
          ì°¨ë¦¬ê²Œ í•´ë“œë¦½ë‹ˆë‹¤.</p>

        <!-- Chat Interface -->
        <div class="coach-chat-container">
          <div id="coachChatMessages" class="coach-chat-messages">
            <div class="coach-message">
              ì•¼ ìƒˆë¼ì•¼, ë­ ë¬¼ì–´ë³¼ ê±° ìˆëƒ? ë›°ê¸° ì‹«ë‹¤ê³  ì§•ì§•ëŒ€ì§€ ë§ê³  ì§ˆë¬¸ì´ë‚˜ í•´ë¼ ã…‹ã…‹
            </div>
          </div>

          <div class="coach-chat-input-row">
            <input type="text" id="coachInput" class="coach-input" placeholder="ì—¬ê¸°ë‹¤ ì³ë´... (ì˜ˆ: ì˜¤ëŠ˜ 10km ë›°ë ¤ëŠ”ë° ì¤€ë¹„ìš´ë™ ë­í•´?)" />
            <button id="coachSendBtn" class="btn coach-send-btn">
              ë³´ë‚´ê¸°
            </button>
          </div>
        </div>

        <div id="coachLoading" class="coach-loading">
          <span>ì½”ì¹˜ê°€ ë‹µë³€ ì¤€ë¹„ ì¤‘...</span>
        </div>
      </div>

      <div id="sec-schedule" class="section feed-section" data-feed-key="schedule">
        <p class="feed-intro">iCloud ìº˜ë¦°ë” ì¼ì • íƒ€ì„ë¼ì¸</p>
        <div id="scheduleTagBar" class="feed-tag-bar" hidden></div>
        <div id="scheduleFeed" class="feed-list schedule-feed" aria-live="polite"></div>
        <div id="scheduleEmpty" class="feed-empty" hidden>ì¼ì •ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</div>
      </div>

      <div id="sec-archive" class="section feed-section" data-feed-key="archive">
        <p class="feed-intro">í¬í†  / ë¹„ë””ì˜¤ / ê·¸ë˜í”½ ì¹´ë“œ í”¼ë“œ</p>
        <div id="archiveTagBar" class="feed-tag-bar" hidden></div>
        <div id="archiveFeed" class="feed-list feed-grid" aria-live="polite"></div>
        <div id="archiveEmpty" class="feed-empty" hidden>í•´ë‹¹ íƒœê·¸ì— ë§ëŠ” í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</div>
      </div>

      <div id="sec-mixes" class="section feed-section" data-feed-key="mixes">
        <p class="feed-intro">ë¯¹ìŠ¤ì…‹ í”¼ë“œ (íƒœê·¸ í•„í„° + í”Œë«í¼ ì •ë³´)</p>
        <div id="mixesTagBar" class="feed-tag-bar" hidden></div>
        <div id="mixesFeed" class="feed-list" aria-live="polite"></div>
        <div id="mixesEmpty" class="feed-empty" hidden>í•´ë‹¹ íƒœê·¸ì— ë§ëŠ” ë¯¹ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
      </div>

      <div id="sec-marathoner" class="section feed-section" data-feed-key="marathoner">
        <p class="feed-intro">ëŸ¬ë‹ ë¡œê·¸ í”¼ë“œ (ê±°ë¦¬ / í˜ì´ìŠ¤ / ë£¨íŠ¸ / ì»¨ë””ì…˜)</p>
        <div id="marathonerTagBar" class="feed-tag-bar" hidden></div>
        <div id="marathonerFeed" class="feed-list" aria-live="polite"></div>
        <div id="marathonerEmpty" class="feed-empty" hidden>í•´ë‹¹ íƒœê·¸ ëŸ¬ë‹ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>
      </div>

    </div>
  </section>

  <!-- Imports -->
  <!-- Main Scripts -->
  <script src="js/visuals.js?v=3.7"></script>
  <script src="js/navigation_feeds.js?v=3.7"></script>
  <script src="js/game_video.js?v=3.7"></script>
  <script src="js/boot_gate.js?v=3.7"></script>
  <script src="js/devil_coach_chat.js?v=3.7"></script>
</body>

</html>
