# Devil Town í”„ë¡œì íŠ¸ ë¶„ì„ ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2026-02-14  
**ë²„ì „**: 2.0 (ì½”ë“œ ì •ë¦¬ ì™„ë£Œ)

---

## ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”

**í”„ë¡œì íŠ¸ëª…**: Devil Town Running Coach  
**ëª©ì **: ìš•ìŸì´ AI ëŸ¬ë‹ ì½”ì¹˜ê°€ í†µí•©ëœ ëŸ¬ë‹ ì»¤ë®¤ë‹ˆí‹° ì›¹ì‚¬ì´íŠ¸  
**ê¸°ìˆ  ìŠ¤íƒ**: HTML/CSS/JS (Frontend) + Python/FastAPI (Backend) + Google Gemini AI

---

## ğŸ—ï¸ í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡° (ì •ë¦¬ ì™„ë£Œ)

```
ë°ë¹Œíƒ€ìš´ ì›¹ì‚¬ì´íŠ¸/
â”œâ”€â”€ ğŸ“„ Frontend
â”‚   â”œâ”€â”€ index.html (333 lines)         # ë©”ì¸ HTML
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css                  # ë‹¤í¬/ì‚¬ì´ë²„í‘í¬ í…Œë§ˆ
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ script.js (637 lines)      # ë©”ì¸ ë¡œì§ + Skull Game
â”‚       â””â”€â”€ devil_coach_chat.js (95 lines) # AI ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ âœ¨
â”‚
â”œâ”€â”€ ğŸ Backend (FastAPI)
â”‚   â”œâ”€â”€ main.py (129 lines)            # API ì„œë²„ + Static íŒŒì¼ ì„œë¹™
â”‚   â”œâ”€â”€ system_prompt.md (125 lines)   # AI í˜ë¥´ì†Œë‚˜ ì •ì˜
â”‚   â””â”€â”€ requirements.txt               # Python ì˜ì¡´ì„±
â”‚
â”œâ”€â”€ ğŸ“š Documentation
â”‚   â”œâ”€â”€ README.md                      # í”„ë¡œì íŠ¸ ì„¤ëª…
â”‚   â””â”€â”€ SYSTEM_DOCS.md (391 lines)     # ìƒì„¸ ì‹œìŠ¤í…œ ë¬¸ì„œ
â”‚
â””â”€â”€ ğŸ”’ Configuration
    â”œâ”€â”€ .env                           # API í‚¤ (gitignored)
    â”œâ”€â”€ .gitignore                     # Git ì œì™¸ íŒŒì¼
    â””â”€â”€ .DS_Store                      # macOS ì‹œìŠ¤í…œ íŒŒì¼
```

**ì´ ì½”ë“œ ë¼ì¸**: ~1,710 lines (ì •ë¦¬ í›„ ì•½ 300 lines ê°ì†Œ)

---

## âœ… ìµœê·¼ ê°œì„ ì‚¬í•­ (2026-02-14)

### 1. **ì½”ë“œ ì •ë¦¬**
- âŒ `devil_coach.js` ì‚­ì œ (92 lines) - deprecated, API í‚¤ ë…¸ì¶œ ìœ„í—˜
- âŒ `skull_game.js` ì‚­ì œ - ì¤‘ë³µ ë¡œì§ (script.jsì— ì´ë¯¸ ì¡´ì¬)
- âœ… HTML script íƒœê·¸ ì •ë¦¬

### 2. **ë‹¨ì¼ í¬íŠ¸ í†µí•©** â­
**ë³€ê²½ ì „**:
- í¬íŠ¸ 8999: `python3 -m http.server` (í”„ë¡ íŠ¸ì—”ë“œ)
- í¬íŠ¸ 8000: `python main.py` (ë°±ì—”ë“œ)

**ë³€ê²½ í›„**:
- í¬íŠ¸ 8000: FastAPIê°€ í”„ë¡ íŠ¸ì—”ë“œ + ë°±ì—”ë“œ ëª¨ë‘ ì„œë¹™
- `main.py`ì— StaticFiles ì¶”ê°€
- ì ‘ì†: `http://127.0.0.1:8000`

### 3. **ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ **
```javascript
// ì´ì „: ë‹¨ìˆœ ì—ëŸ¬ ë©”ì‹œì§€
catch (error) {
    addCoachMessage('ì„œë²„ê°€ ë’¤ì¡Œë„¤...');
}

// ê°œì„ : êµ¬ì²´ì ì¸ ì—ëŸ¬ íƒ€ì…ë³„ ë©”ì‹œì§€
catch (error) {
    if (error.message.includes('Failed to fetch')) {
        // ì„œë²„ ì—°ê²° ì‹¤íŒ¨
    } else if (error.message.includes('500')) {
        // API í‚¤ ì˜¤ë¥˜
    }
}
```

### 4. **ë³´ì•ˆ ê°•í™”**
- âœ… API í‚¤ ì™„ì „ ì œê±° (devil_coach.jsì—ì„œ)
- âœ… SYSTEM_DOCS.mdì—ì„œ ì‹¤ì œ API í‚¤ ì œê±°
- âœ… .env íŒŒì¼ gitignore í™•ì¸

---

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

### 1. **ë©”ì¸ ì›¹ì‚¬ì´íŠ¸** (index.html + script.js)
- **Digital Rain ë°°ê²½**: Matrix ìŠ¤íƒ€ì¼ ì• ë‹ˆë©”ì´ì…˜
- **ASCII Art**: í•´ê³¨ + DEVILTOWN ë¡œê³  scramble íš¨ê³¼
- **ë°˜ì‘í˜• ë©”ë‰´**: 6ê°œ ì„¹ì…˜
  - WTF is Devil Town
  - Schedule
  - Archive (Photo/Video)
  - Mixes
  - Marathoner
  - ğŸ’€ Skull Game
  - ğŸ¤¬ Devil Coach (AI)
- **ë¹„ë””ì˜¤ ìºëŸ¬ì…€**: DJ ë¯¹ìŠ¤ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ + Instagram ë§í¬

### 2. **ğŸ’€ Skull Game** (script.js)
ìš´ëª…ì˜ ê±°ë¦¬ ë½‘ê¸° ì‹œìŠ¤í…œ:
- **0km**: 1% (íœ´ì‹)
- **42.195km**: 1% (í’€ì½”ìŠ¤)
- **30km LSD**: 5% (ì§€ì˜¥ì£¼)
- **3-21km**: 93% (ì¼ë°˜)

### 3. **ğŸ¤¬ Devil Coach AI** (devil_coach_chat.js + main.py)
- **ì‹¤ì‹œê°„ ì±„íŒ…**: ëŒ€í™” íˆìŠ¤í† ë¦¬ ìœ ì§€
- **í˜ë¥´ì†Œë‚˜**: "ë§¤ë¯¸í‚´ ë§› ì°ì¹œ" ìš•ìŸì´ ì½”ì¹˜
- **ì•„ìŠ¤í‚¤ ì•„íŠ¸**: ì´ëª¨í‹°ì½˜ìœ¼ë¡œ ì‘ë‹µ ê°•í™”
- **ë°±ì—”ë“œ í†µí•©**: FastAPI + Google Gemini 1.5 Pro
- **ì—ëŸ¬ ì²˜ë¦¬**: êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€

---

## ğŸ’ª ê°•ì 

### 1. **ë””ìì¸ & UX**
- âœ… ë…íŠ¹í•œ ë‹¤í¬/ë ˆë“œ ì‚¬ì´ë²„í‘í¬ í…Œë§ˆ
- âœ… ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ (scramble, glitch, burst)
- âœ… ì§ê´€ì ì¸ ë©”ë‰´ êµ¬ì¡°
- âœ… ëª¨ë°”ì¼ ìµœì í™”

### 2. **ì½”ë“œ í’ˆì§ˆ**
- âœ… ê¹”ë”í•œ êµ¬ì¡° (ë¶ˆí•„ìš”í•œ íŒŒì¼ ì œê±°)
- âœ… ìƒì„¸í•œ ì£¼ì„ (main.py)
- âœ… ë³´ì•ˆ ì²˜ë¦¬ (API í‚¤ í™˜ê²½ ë³€ìˆ˜)
- âœ… ì—ëŸ¬ í•¸ë“¤ë§ ê°œì„ 

### 3. **AI í†µí•©**
- âœ… ë°±ì—”ë“œ APIë¡œ ë³´ì•ˆ ê°•í™”
- âœ… ëŒ€í™” íˆìŠ¤í† ë¦¬ ê´€ë¦¬
- âœ… ë…íŠ¹í•œ í˜ë¥´ì†Œë‚˜

### 4. **ë°°í¬ í¸ì˜ì„±**
- âœ… ë‹¨ì¼ í¬íŠ¸ (8000)
- âœ… ê°„ë‹¨í•œ ì‹¤í–‰ (`python main.py`)
- âœ… ì˜ ì •ë¦¬ëœ ë¬¸ì„œ

---

## âš ï¸ ë‚¨ì€ ê°œì„  í•„ìš” ì‚¬í•­

### 1. **í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„** (HIGH)

**í˜„ì¬ ìƒíƒœ**:
```python
allow_origins=["*"]  # ëª¨ë“  origin í—ˆìš©
```

**ê¶Œì¥ ìˆ˜ì •**:
```python
allow_origins=["https://yourdomain.com"]
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] CORS origins ì œí•œ
- [ ] HTTPS ì„¤ì • (Let's Encrypt)
- [ ] Rate limiting ì¶”ê°€
- [ ] ë¡œê¹… ì‹œìŠ¤í…œ (Sentry, CloudWatch)
- [ ] í™˜ê²½ë³„ ì„¤ì • (dev, staging, prod)

### 2. **í…ŒìŠ¤íŠ¸ ì¶”ê°€** (MEDIUM)

**í˜„ì¬**: í…ŒìŠ¤íŠ¸ ì½”ë“œ 0%

**ê¶Œì¥**:
```python
# tests/test_main.py
from fastapi.testclient import TestClient

def test_chat_endpoint():
    response = client.post("/chat", json={
        "message": "ì•ˆë…•",
        "history": []
    })
    assert response.status_code == 200
```

**ëª©í‘œ**: 70%+ ì½”ë“œ ì»¤ë²„ë¦¬ì§€

### 3. **ì„±ëŠ¥ ìµœì í™”** (LOW)

**Digital Rain ì• ë‹ˆë©”ì´ì…˜**:
```javascript
// í˜„ì¬: ë§¤ í”„ë ˆì„ ëª¨ë“  ì»¬ëŸ¼ ì—…ë°ì´íŠ¸
for (let c = 0; c < cols; c++) { ... }

// ê°œì„ : ëœë¤ ìƒ˜í”Œë§
const updateCount = isMobile ? cols / 4 : cols / 2;
```

### 4. **ëª¨ë‹ˆí„°ë§** (MEDIUM)

**ì¶”ê°€ ê¶Œì¥**:
- API ì‚¬ìš©ëŸ‰ ì¶”ì 
- ì—ëŸ¬ ë¡œê¹… (Sentry)
- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (New Relic, DataDog)

---

## ğŸš€ ì‹¤í–‰ ë°©ë²• (ì—…ë°ì´íŠ¸)

### 1. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
pip install -r requirements.txt
```

### 2. API í‚¤ ì„¤ì •
`.env` íŒŒì¼ ìƒì„±:
```env
GOOGLE_API_KEY=your_api_key_here
```

### 3. ì„œë²„ ì‹¤í–‰ (ë‹¨ì¼ ëª…ë ¹)
```bash
python main.py
```

ì¶œë ¥:
```
ğŸƒ Devil Town Running Coach Server Starting...
ğŸ“ Frontend: http://127.0.0.1:8000
ğŸ“ API Docs: http://127.0.0.1:8000/docs
ğŸ’€ Skull Game & Devil Coach AI ready!
```

### 4. ì ‘ì†
ë¸Œë¼ìš°ì €ì—ì„œ `http://127.0.0.1:8000` ì ‘ì†

---

## ğŸ“ˆ ìš°ì„ ìˆœìœ„ë³„ ë¡œë“œë§µ

### Phase 1: ì™„ë£Œ âœ…
- [x] ë³´ì•ˆ ê°ì‚¬ ë° API í‚¤ ì œê±°
- [x] ë¶ˆí•„ìš”í•œ íŒŒì¼ ì‚­ì œ
- [x] ë‹¨ì¼ í¬íŠ¸ í†µí•©
- [x] ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 
- [x] Git ì €ì¥ì†Œ ì¤€ë¹„

### Phase 2: ë‹¨ê¸° (1ì£¼)
- [ ] ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì¶”ê°€
- [ ] í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ ê°œì„  (pydantic-settings)
- [ ] ë¡œê¹… ì‹œìŠ¤í…œ ì¶”ê°€

### Phase 3: ì¤‘ê¸° (2-4ì£¼)
- [ ] í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ëª¨ë‹ˆí„°ë§ ì„¤ì •

### Phase 4: ì¥ê¸° (1-3ê°œì›”)
- [ ] CI/CD íŒŒì´í”„ë¼ì¸
- [ ] Docker ì»¨í…Œì´ë„ˆí™”
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ê¸°ë°˜ ê°œì„ 

---

## ğŸ’¡ ì¶”ê°€ ê¸°ëŠ¥ ì œì•ˆ

### 1. **ëŸ¬ë‹ ê¸°ë¡ ì €ì¥**
```javascript
// LocalStorage í™œìš©
localStorage.setItem('runHistory', JSON.stringify(runs));
```

### 2. **ë‚ ì”¨ API í†µí•©**
```python
import requests

def get_weather():
    return requests.get(
        "https://api.openweathermap.org/data/2.5/weather",
        params={"q": "Seoul"}
    ).json()
```

### 3. **ì†Œì…œ ê¸°ëŠ¥**
- ëŸ¬ë‹ ì±Œë¦°ì§€
- ë¦¬ë”ë³´ë“œ
- ì¹œêµ¬ ì´ˆëŒ€

---

## ğŸ“Š ì½”ë“œ í’ˆì§ˆ ë©”íŠ¸ë¦­

| í•­ëª© | í˜„ì¬ | ëª©í‘œ |
|------|------|------|
| ì½”ë“œ ì»¤ë²„ë¦¬ì§€ | 0% | 70%+ |
| ì‘ë‹µ ì‹œê°„ (AI) | 2-5ì´ˆ | 1-3ì´ˆ |
| ë²ˆë“¤ í¬ê¸° | ~18KB | <15KB |
| Lighthouse ì ìˆ˜ | ? | 90+ |
| ë³´ì•ˆ ë“±ê¸‰ | A- | A |

---

## ğŸ¯ ì „ì²´ í‰ê°€

### **A- (90/100)** â¬†ï¸ (ì´ì „: B+ 85/100)

| í•­ëª© | ì ìˆ˜ | ê°œì„  |
|------|------|------|
| ê¸°ëŠ¥ì„± | A (90/100) | - |
| ì½”ë“œ í’ˆì§ˆ | A- (88/100) | â¬†ï¸ +3 |
| ë³´ì•ˆ | A (92/100) | â¬†ï¸ +4 |
| í™•ì¥ì„± | B+ (85/100) | â¬†ï¸ +5 |
| ë¬¸ì„œí™” | A (95/100) | - |

**ê°œì„  ì´ìœ **:
- ì½”ë“œ ì •ë¦¬ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- ë‹¨ì¼ í¬íŠ¸ë¡œ ë°°í¬ ê°„ì†Œí™”
- ë³´ì•ˆ ê°•í™” (API í‚¤ ì™„ì „ ì œê±°)

---

## âœ… ê²°ë¡ 

**í˜„ì¬ ìƒíƒœ**: í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„ ë‹¨ê³„  
**ê°•ì **: ë…íŠ¹í•œ ì»¨ì…‰, ê¹”ë”í•œ ì½”ë“œ, ê°•ë ¥í•œ ë³´ì•ˆ  
**ë‹¤ìŒ ë‹¨ê³„**: í…ŒìŠ¤íŠ¸ ì¶”ê°€ ë° í”„ë¡œë•ì…˜ ì„¤ì •

í”„ë¡œì íŠ¸ëŠ” ë§¤ìš° íƒ„íƒ„í•œ ê¸°ë°˜ì„ ê°–ì¶”ì—ˆìœ¼ë©°, Phase 2-3 ê°œì„ ì‚¬í•­ì„ ì ìš©í•˜ë©´ ì™„ë²½í•œ í”„ë¡œë•ì…˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë  ê²ƒì…ë‹ˆë‹¤!

---

**Happy Running! ğŸƒâ€â™‚ï¸ğŸ’¨**
